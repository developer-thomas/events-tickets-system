<div class="filter-modal">
  <div class="filter-header">
    <h2>Filtro</h2>
    <button mat-icon-button (click)="closeDialog()">
      <mat-icon>close</mat-icon>
    </button>
  </div>

  <!-- Type Selection -->
  <div class="filter-section">
    <h3>Selecione o tipo</h3>
    <div class="type-options">
      @for(category of categories(); track category.id) {
        <div 
          class="type-option" 
          [class.selected]="category.selected"
          (click)="selectCategories(category.id)">
          <img [src]="category.imageIcon" [alt]="category.name">
        </div>
      }
    </div>
  </div>

  <!-- Location Selection -->
  <div class="filter-section">
    <h3>Selecione o local de referência</h3>
    <div class="location-options">
      @for(location of getVisibleLocations(); track location.id) {
        <div 
          class="location-option" 
          [class.selected]="location.selected"
          (click)="selectLocation(location.id)">
          <div class="location-icon">
            <mat-icon>{{location.icon}}</mat-icon>
          </div>
          <p>{{location.name}}</p>
        </div>
      }
    </div>
  </div>

  <!-- Date Selection -->
  <!-- Date Selection -->
<div class="filter-section">
  <h3>Selecione a data</h3>

  <!-- Mês e Ano -->
  <div class="calendar-header">
    <mat-form-field appearance="outline" class="month-selector">
      <mat-label>Mês</mat-label>
      <mat-select [(value)]="selectedMonth" (selectionChange)="generateCalendarDays()">
        <mat-option *ngFor="let month of months; let i = index" [value]="i">{{ month }}</mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="outline" class="year-selector">
      <mat-label>Ano</mat-label>
      <mat-select [(value)]="selectedYear" (selectionChange)="generateCalendarDays()">
        <mat-option *ngFor="let year of years" [value]="year">{{ year }}</mat-option>
      </mat-select>
    </mat-form-field>
  </div>

  <!-- Dias da Semana -->
  <div class="week-days">
    <div *ngFor="let day of weekDays" class="week-day">{{ day }}</div>
  </div>

  <!-- Dias do Mês -->
  <div class="calendar-days">
    @for(date of dates; track date.day) {
      <div
        class="calendar-day"
        [class.selected]="date.selected"
        [class.empty]="date.day === 0"
        (click)="date.day !== 0 && toggleDateSelection(date)">
        {{ date.day === 0 ? '' : (date.day < 10 ? '0' + date.day : date.day) }}
      </div>
    }
  </div>
</div>

  <!-- Filter Button -->
  <button class="filter-button" (click)="applyFilters()">FILTRAR</button>
</div>
