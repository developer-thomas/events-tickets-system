<h2 mat-dialog-title>Editar Endereço</h2>
    <div mat-dialog-content>
      <form [formGroup]="addressForm">
        <!-- Reference Type Selection -->
        <div class="mb-6">
          <label class="block text-sm font-medium text-gray-700 mb-3">Tipo de Endereço</label>
          <div class="flex gap-4">
            <button 
              type="button"
              class="flex items-center gap-2 px-4 py-3 border-2 rounded-lg transition-all duration-200"
              [class.border-blue-500]="selectedReferenceType === 'Home'"
              [class.bg-blue-50]="selectedReferenceType === 'Home'"
              [class.border-gray-300]="selectedReferenceType !== 'Home'"
              [class.bg-white]="selectedReferenceType !== 'Home'"
              (click)="selectReferenceType('Home')"
            >
              <mat-icon class="text-blue-600">home</mat-icon>
              <span class="font-medium">Casa</span>
            </button>
            
            <button 
              type="button"
              class="flex items-center gap-2 px-4 py-3 border-2 rounded-lg transition-all duration-200"
              [class.border-blue-500]="selectedReferenceType === 'Job'"
              [class.bg-blue-50]="selectedReferenceType === 'Job'"
              [class.border-gray-300]="selectedReferenceType !== 'Job'"
              [class.bg-white]="selectedReferenceType !== 'Job'"
              (click)="selectReferenceType('Job')"
            >
              <mat-icon class="text-blue-600">work</mat-icon>
              <span class="font-medium">Trabalho</span>
            </button>
          </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <mat-form-field appearance="outline" class="w-full md:col-span-2">
            <mat-label>Rua/Avenida</mat-label>
            <input matInput formControlName="street">
            <mat-error *ngIf="addressForm.get('street')?.hasError('required')">
              Rua/Avenida é obrigatória
            </mat-error>
          </mat-form-field>
          
          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Número</mat-label>
            <input matInput formControlName="number">
            <mat-error *ngIf="addressForm.get('number')?.hasError('required')">
              Número é obrigatório
            </mat-error>
          </mat-form-field>
          
          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Complemento</mat-label>
            <input matInput formControlName="complement">
          </mat-form-field>
          
          <mat-form-field appearance="outline" class="w-full">
            <mat-label>CEP</mat-label>
            <input matInput formControlName="zipCode">
            <mat-error *ngIf="addressForm.get('zipCode')?.hasError('required')">
              CEP é obrigatório
            </mat-error>
          </mat-form-field>
          
          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Cidade</mat-label>
            <input matInput formControlName="city">
            <mat-error *ngIf="addressForm.get('city')?.hasError('required')">
              Cidade é obrigatória
            </mat-error>
          </mat-form-field>
          
          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Estado</mat-label>
            <mat-select formControlName="state">
              <mat-option value="AC">Acre</mat-option>
              <mat-option value="AL">Alagoas</mat-option>
              <mat-option value="AP">Amapá</mat-option>
              <mat-option value="AM">Amazonas</mat-option>
              <mat-option value="BA">Bahia</mat-option>
              <mat-option value="CE">Ceará</mat-option>
              <mat-option value="DF">Distrito Federal</mat-option>
              <mat-option value="ES">Espírito Santo</mat-option>
              <mat-option value="GO">Goiás</mat-option>
              <mat-option value="MA">Maranhão</mat-option>
              <mat-option value="MT">Mato Grosso</mat-option>
              <mat-option value="MS">Mato Grosso do Sul</mat-option>
              <mat-option value="MG">Minas Gerais</mat-option>
              <mat-option value="PA">Pará</mat-option>
              <mat-option value="PB">Paraíba</mat-option>
              <mat-option value="PR">Paraná</mat-option>
              <mat-option value="PE">Pernambuco</mat-option>
              <mat-option value="PI">Piauí</mat-option>
              <mat-option value="RJ">Rio de Janeiro</mat-option>
              <mat-option value="RN">Rio Grande do Norte</mat-option>
              <mat-option value="RS">Rio Grande do Sul</mat-option>
              <mat-option value="RO">Rondônia</mat-option>
              <mat-option value="RR">Roraima</mat-option>
              <mat-option value="SC">Santa Catarina</mat-option>
              <mat-option value="SP">São Paulo</mat-option>
              <mat-option value="SE">Sergipe</mat-option>
              <mat-option value="TO">Tocantins</mat-option>
            </mat-select>
            <mat-error *ngIf="addressForm.get('state')?.hasError('required')">
              Estado é obrigatório
            </mat-error>
          </mat-form-field>
        </div>
      </form>
    </div>
    <div mat-dialog-actions align="end">
      <button mat-button (click)="onCancel()" [disabled]="isLoading">Cancelar</button>
      <button 
        mat-raised-button 
        color="primary" 
        [disabled]="addressForm.invalid || isLoading" 
        (click)="onSubmit()"
      >
        <mat-icon *ngIf="isLoading" class="animate-spin mr-2">refresh</mat-icon>
        {{ isLoading ? 'Salvando...' : 'Salvar' }}
      </button>
    </div>