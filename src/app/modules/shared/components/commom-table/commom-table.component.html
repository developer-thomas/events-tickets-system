<div class="overflow-x-auto">
  <table mat-table class="w-max" matSort [dataSource]="dataSource">
    @for (item of displayedColumns; track $index) {
      @switch (item.type) {
        @case ('menu') {
          <ng-container matColumnDef="menu">
            <th mat-header-cell *matHeaderCellDef></th>
            <td mat-cell *matCellDef="let row">
              <button mat-icon-button [matMenuTriggerFor]="menu" (click)="$event.stopPropagation()">
                <mat-icon>more_horiz</mat-icon>
              </button>
              <mat-menu #menu="matMenu">
                <button mat-menu-item (click)="detailClick(row)">
                  <mat-icon>info</mat-icon>
                  <span>Ver detalhes</span>
                </button>
                <button mat-menu-item (click)="editClick(row)">
                  <mat-icon>edit</mat-icon>
                  <span>Editar</span>
                </button>
                <button mat-menu-item (click)="deleteClick(row)">
                  <mat-icon>highlight_off</mat-icon>
                  <span>Deletar</span>
                </button>
              </mat-menu>            
            </td>
          </ng-container>
        }
        @case ('currency') {
          <ng-container matColumnDef="{{ item.key }}">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>{{ item.label | titlecase }}</th>
            <td mat-cell *matCellDef="let row">{{ row[item.key] | currency }}</td>
          </ng-container>
        }
        @case ('status') {
          <ng-container matColumnDef="{{ item.key }}">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>{{ item.label | titlecase }}</th>
            <td mat-cell *matCellDef="let row">{{ row[item.key] | booleanStatus }}</td>
          </ng-container>
        }
        @default {
          <ng-container matColumnDef="{{ item.key }}">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>{{ item.label | titlecase }}</th>
            <td mat-cell *matCellDef="let row">{{ row[item.key] }}</td>
          </ng-container>
        }
      }
    }
    
    <tr mat-header-row *matHeaderRowDef="displayedColumnsKeys"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumnsKeys;" class="hover:bg-gray-200"></tr>
    <tr *matNoDataRow>
      <td class="text-center py-4" [colSpan]="displayedColumnsKeys.length">Sem resultados</td>
    </tr>
  </table>

  <mat-paginator #paginator
      [length]="totalItems"
      [pageIndex]="page - 1"
      [pageSize]="size"
      [pageSizeOptions]="[5, 10, 20]"
      aria-label="Select page"
      (page)="pagination($event)"
  >
  </mat-paginator>
</div>